<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="author" content="Cornelius Aschermann">
<meta name="keywords" content="">
<meta name="description" content="View On Github
SchemDBG SchemDBG is a back-end agnostic debugger front-end that focuses on debugging binaries without access to the source code.
SchemDBG grew from the frustration with reversing in Linux environments (e.G. no proper binary-only-frontends for GDB). Currently, SchemDBG features a plain GDB server back-end and a PIN based back-end running on both 32 and 64 bit binaries in a Ubuntu host. SchemDBG hasn&rsquo;t been tested with the PIN back-end on a Windows host but the PIN debug server works under windows #17.">


<meta property="og:description" content="View On Github
SchemDBG SchemDBG is a back-end agnostic debugger front-end that focuses on debugging binaries without access to the source code.
SchemDBG grew from the frustration with reversing in Linux environments (e.G. no proper binary-only-frontends for GDB). Currently, SchemDBG features a plain GDB server back-end and a PIN based back-end running on both 32 and 64 bit binaries in a Ubuntu host. SchemDBG hasn&rsquo;t been tested with the PIN back-end on a Windows host but the PIN debug server works under windows #17.">
<meta property="og:type" content="article">
<meta property="og:title" content="SchemDBG">
<meta name="twitter:title" content="SchemDBG">
<meta property="og:url" content="https://hexgolems.com/2014/10/schemdbg/">
<meta property="twitter:url" content="https://hexgolems.com/2014/10/schemdbg/">
<meta property="og:site_name" content="Hexgolems">
<meta property="og:description" content="View On Github
SchemDBG SchemDBG is a back-end agnostic debugger front-end that focuses on debugging binaries without access to the source code.
SchemDBG grew from the frustration with reversing in Linux environments (e.G. no proper binary-only-frontends for GDB). Currently, SchemDBG features a plain GDB server back-end and a PIN based back-end running on both 32 and 64 bit binaries in a Ubuntu host. SchemDBG hasn&rsquo;t been tested with the PIN back-end on a Windows host but the PIN debug server works under windows #17.">
<meta name="twitter:description" content="View On Github
SchemDBG SchemDBG is a back-end agnostic debugger front-end that focuses on debugging binaries without access to the source code.
SchemDBG grew from the frustration with reversing in Linux environments (e.G. no proper binary-only-frontends for GDB). Currently, SchemDBG features a plain GDB server back-end and a PIN based back-end running on both 32 and 64 bit binaries in a Ubuntu host. SchemDBG hasn&rsquo;t been tested with the PIN back-end on a Windows host but the PIN debug server works under windows #17.">
<meta property="og:locale" content="en">

  
    <meta property="article:published_time" content="2014-10-01T00:00:00">
  
  
    <meta property="article:modified_time" content="2014-10-01T00:00:00">
  
  
  
  
    
      <meta property="article:tag" content="binary">
    
      <meta property="article:tag" content="reversing">
    
      <meta property="article:tag" content="github">
    
      <meta property="article:tag" content="ruby">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@is_eqv">


  <meta name="twitter:creator" content="@is_eqv">







  <meta property="og:image" content="https://hexgolems.com/imgs/avatar.png">
  <meta property="twitter:image" content="https://hexgolems.com/imgs/avatar.png">



  <meta property="og:image" content="https://hexgolems.com/imgs/schem_img.png">
  <meta property="twitter:image" content="https://hexgolems.com/imgs/schem_img.png">


  <meta property="og:image" content="https://hexgolems.com/imgs/schem_img.png">
  <meta property="twitter:image" content="https://hexgolems.com/imgs/schem_img.png">



    <title>SchemDBG</title>

    <link rel="icon" href="https://hexgolems.com/favicon.png">
    

    

    <link rel="canonical" href="https://hexgolems.com/2014/10/schemdbg/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://hexgolems.com/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://hexgolems.com/">Hexgolems</a>
  </div>
  
    
      <a class="header-right-icon "
         href="https://hexgolems.com/#about">
    
    
      <i class="fa fa-2x fa-user"></i>
    
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://hexgolems.com/#about">
          <img class="sidebar-profile-picture" src="https://hexgolems.com/imgs/avatar.png" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Cornelius Aschermann</h4>
        
          <h5 class="sidebar-profile-bio">Fuzzing, Reverse Engineering, Binary Analysis</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hexgolems.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hexgolems.com/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hexgolems.com/tags/github">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/is_eqv" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hexgolems.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-center
              post-header-cover--partial"
       style="background-image:url('/imgs/schem_img.png')"
       data-behavior="5">
    
  </div>


      <div id="main" data-behavior="5"
        class="hasCover
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title" itemprop="headline">
      SchemDBG
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2014-10-01T00:00:00Z">
        October, 2014

      </time>
    
    
  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p align=center><a href="https://github.com/hexgolems/schem" class="btn btn--primary" text-align="center"><i class="fa fa-github" aria-hidden="true"></i> View On Github</a></p>

<h1 id="schemdbg">SchemDBG</h1>

<p>SchemDBG is a back-end agnostic debugger front-end that focuses on debugging
binaries without access to the source code.</p>

<p><img src="http://hexgolems.github.io/schem/screenshots/v0.2/Schem_v0.2.png" alt="SchemDBG" /></p>

<p>SchemDBG grew from the frustration with reversing in Linux environments (e.G. no
proper binary-only-frontends for GDB). Currently, SchemDBG features a plain GDB
server back-end and a PIN based back-end running on both 32 and 64 bit binaries
in a Ubuntu host. SchemDBG hasn&rsquo;t been tested with the PIN back-end on a
Windows host but the PIN debug server works under windows #17.</p>

<p>The debugger uses a controller written in ruby and a web front-end written in
coffee-script. Currently, the front-end will only work properly in Chromium and
it is not planned to support other browsers.</p>

<h1 id="vision">Vision</h1>

<h2 id="a-debugger-for-reversing">A debugger for reversing</h2>

<p>The debugger is not meant to be used to debug your own code where you have
access to the source code. It is meant to be used for disassembling binaries.
This has a range of consequences, during debugging one might encounter
self-modifying code, anti debugging techniques, handwritten assembly, &hellip; And
there is very little help in understanding the behavior in form of debug
symbols. That&rsquo;s why SchemDBG will have to make the most out of the available
information.</p>

<h2 id="display-as-much-information-as-possible">Display as much information as possible</h2>

<p>A debugger should focus on making as much information available to the user as
possible at any point in time. Schem tries to achieve this in various ways. The most
obvious one would be how it handles labels. Instead of plain old strings it can
add arbitrary data to a label. Additionally, a label is not just pointing at one
byte in memory but describes a whole address range. To make this explicit they
were named <code>tags</code> instead of labels. Tags containing type information are
used in any of the mayor views (stack, memory, CPU). Other use cases are
displaying information such as allocation origin, heap information, inferred
C++ class vtables or any other information that can be extracted.</p>

<p>One is able to create as many different views in any layout one wishes to
using only a simple HTML file with stub divs. Many clients can connect to the
same controller which trivially allows to have custom multi-monitor setups.</p>

<h2 id="make-the-tool-back-end-agnostic">Make the tool back-end agnostic</h2>

<p>There is a vast amount of different debuggers out there. SchemDBG tries to make
it quite simple to implement custom back-ends for our front-end (and maybe even
custom debuggers). Therefore, the actual debugger is decoupled from the
front-end. If you choose to implement an own debugger back-end you will only have
to create a class that implements basic memory read/write, register
read/write, step, break point, run, and a function that lists mapped memory
ranges / loaded images. Currently, Schem has a gdbserver back-end and a back-end
that connects to any PIN tool.</p>

<h2 id="make-scripting-possible">Make scripting possible</h2>

<p>Since the entire controller is written in ruby, scripting the debugger is quite
simple. SchemDBG offers high level APIs so that scripts will not
have to rely on low level information such as the underlying debugger back-end
or platform. Watch expressions are integrated into the front-end which can run
ruby code on every stop. The debugger will spawn a ruby REPL (pry) which has full
access to any aspect of the debugger. For the future it is planned to add
another class of plugins which can be used to automatize may aspects of
reversing.</p>

<h2 id="make-teamwork-integration-possible">Make teamwork/integration possible</h2>

<p>Current tools make interacting with team members working on the same binary
very complicated if not impossible. Schem will try to make sharing of any inferred
information as painless as possible. Originally, it was planned to facilitate this by
using a redis database to store all relevant information. However, during the
actual development the database was used very sparsely and Schem is now in need
of a means of additional interaction. For example, in the future it should be
possible to import type information, etc. from IDA.</p>

<h1 id="features">Features</h1>

<h2 id="memory-view">Memory view</h2>

<p>Memory views supporting types and inline display of additional data. This is
helpful if used with custom PIN instrumentations that infer additional
information such as &ldquo;where was this memory allocated&rdquo;. Additionally, the user
can add type information to any part of the memory. While there is a POC
implementation that can be used to increment 1/2/4/8 byte integers, there is no
proper way to modify memory in meaningful ways.</p>

<p>Changing types in memory view <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/memtypes.gif" alt="Changing types in memory view" /></p>

<h2 id="register-view">Register view</h2>

<p>Registers can contain sub-registers which will be displayed in a tree like
structure. Special registers will currently only be displayed without
proper formatting and with no ability to edit them.</p>

<p>Editing regsiters <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/register.gif" alt="Editing regsiters" /></p>

<p>Taking a jump by changing flags <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/regtoggle.gif" alt="Taking a jump by changing flags" /></p>

<h2 id="stack-view">Stack view</h2>

<p>The stack view is currently rather simple and will only display the WORDS above
the stack pointer. In upcoming releases more information will be added to this
such as displaying the stack frames and function arguments in the stack view.</p>

<h2 id="code-view">Code view</h2>

<p>The code view contains a syntax-highlighted disassembly of the code. Hovering opcodes
will display a short description of the instruction. Using the same mechanism as
the memory view (after all they share most of their code) the CPU view displays
additional data. Static strings are displayed as strings and basic blocks that
were identified by the disassembler are colored in such a way that it is easy
to see where a basic block begins and ends.
For disassembly, the controller generates a static mapping that contains the type information of any section in the binary. To do so the binary is disassembled with the <a href="https://github.com/jjyg/metasm">Metasm</a> library. This type information can be updated at run time to handle self modifying code. Not yet implemented is the ability to patch the code at run time with new assembly and display jump paths. Additionally, currently addresses are always displayed as addresses,
but in the future labels will be used, if they are available.</p>

<p>Adding and deleting breakpoints <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/breakpoint.gif" alt="Adding and deleting breakpoints" /></p>

<p>Entering and leaving functions <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/enterleave.gif" alt="Entering and leaving functions" /></p>

<p>Goto label and adding a new label <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/label.gif" alt="Goto label and adding a new label" /></p>

<h2 id="expression-view">Expression View</h2>

<p>The expression view allows the user to evaluate given ruby snippet on every
stop to supply her/him with up-to-date information whenever the debugger stops.</p>

<p>Adding a watch expression <br>
<img src="http://hexgolems.github.io/schem/gifs/v0.2/watchexp.gif" alt="Adding a watch expression" /></p>

<h2 id="disassembly">Disassembly</h2>

<p>Currently, Schem relies on the disassembly provided by Metasm in the
<code>fast_deep</code> mode. If the binary is obfuscated it would be reasonable to use the
slower mode that will symbolically evaluate stack modifications of functions.
Additionally, Schem relies on the data structures returned by Metasm. It is
planned to reduce coupling between our code and the Metasm library such that different platforms can be used more easily (it would be relatively
easy to add support for MIPS and PPC since Metasm support them out of the
box). All disassembly information is stored in a per-section static type
mapping. This mapping can be modified easily by the front-end or other tools but
the format should be better documented.</p>

<h2 id="controller">Controller</h2>

<p>The controller mainly consists of services and plugins. Plugins will be
started in their own thread, while services will only provide functionality.
One example for a service is the <code>tag service</code> which contains the dynamically added
tags. It is registered as <code>srv.tags</code> and can be used from any other
plugin/service. It features the ability to dynamically create, delete and query
tags for any address range. One example for a plugin would be the CPU view
plugin. It is a web plugin (the only kind of plugins currently used). This means
that a new instance can be created by a web-socket request to a special URL. The
instance is then linked to the web-socket connection. The CPUViewPlugin will
then provide the front-end with rendered HTML strings that are displayed as well
as event handlers for context menu actions.</p>

<h1 id="installation">Installation</h1>

<ol>
<li><code>sudo apt-get install git</code></li>
<li><code>git clone https://github.com/hexgolems/schem.git</code></li>
<li>get ruby1.9.3 - either via <a href="http://rvm.io">rvm</a> or do the following: <br>
<code>sudo apt-get install ruby1.9.1 ruby1.9.1-dev g++</code><br>
Yes, it installs ruby1.9.3, blame debian/ubuntu for that naming fuckup.</li>
<li><code>cd schem/controller; ruby make.rb setup</code><br>

<ul>
<li>if you are using ruby via rvm then you don&rsquo;t need root to install gems and please answer with &ldquo;n&rdquo; if you are asked whether you want to install with root<br></li>
<li>if you are using ruby from the debian/ubuntu sources then you need root to install the gems so please answer with &ldquo;y&rdquo;</li>
</ul></li>
<li>make sure all the gems installed correctly, if not figure out why and install them (if you didn&rsquo;t use rvm, pleaes check the <a href="#issues">known issues</a>!)</li>
<li>now we need to compile the front-end from coffescript to javascript <br>
<code>cd schem/frontend; ruby make.rb build</code></li>
<li><code>cd schem/controller/lib; ruby controller.rb -p ../run -b gdb</code></li>
<li>open chromium and visit 127.0.0.1:8000</li>
<li>if you run into trouble join our IRC channel: Freenode/#hexgolems!</li>
<li>???</li>
<li>profit</li>
</ol>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://hexgolems.com/tags/binary/">binary</a>

  <a class="tag tag--primary tag--small" href="https://hexgolems.com/tags/reversing/">reversing</a>

  <a class="tag tag--primary tag--small" href="https://hexgolems.com/tags/github/">github</a>

  <a class="tag tag--primary tag--small" href="https://hexgolems.com/tags/ruby/">ruby</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hexgolems.com/2014/10/pint/" data-tooltip="Pint">
              
                  
                  &lt;
                  
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hexgolems.com/2014/07/brainfuck-jit/" data-tooltip="Brainfuck JIT">
              
              
                  &gt;
                  
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Cornelius Aschermann. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hexgolems.com/2014/10/pint/" data-tooltip="Pint">
              
                  
                  &lt;
                  
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hexgolems.com/2014/07/brainfuck-jit/" data-tooltip="Brainfuck JIT">
              
              
                  &gt;
                  
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fhexgolems.com%2F2014%2F10%2Fschemdbg%2F">
          <i class="fa fa-facebook-official"></i><span>%!(EXTRA string=Facebook)</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fhexgolems.com%2F2014%2F10%2Fschemdbg%2F">
          <i class="fa fa-twitter"></i><span>%!(EXTRA string=Twitter)</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Fhexgolems.com%2F2014%2F10%2Fschemdbg%2F">
          <i class="fa fa-google-plus"></i><span>%!(EXTRA string=Google&#43;)</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://hexgolems.com/imgs/avatar.png" alt="" />
    
    <h4 id="about-card-name">Cornelius Aschermann</h4>
    
      <div id="about-card-bio">Fuzzing, Reverse Engineering, Binary Analysis</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Security Researcher
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Germany
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://hexgolems.com/imgs/dark_bg.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://hexgolems.com/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

